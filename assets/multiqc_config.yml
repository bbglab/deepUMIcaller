report_comment: >
  This report has been generated by the <a href="https://github.com/bbglab/deepUMIcaller" target="_blank">bbglab/deepUMIcaller</a>
  analysis pipeline. For information about how to interpret these results, please see the documentation in GitHub.
report_section_order:
  software_versions:
    order: -1000
  "deepUMIcaller-summary":
    order: -1001

extra_fn_clean_exts:
  - ".duplex"
  - ".raw"
  - ".all_molecules"
  - "_umi_histogram"

export_plots: true

custom_data:
  mutsperpos_ratios:
    id: 'mutsperpos_ratios_section'
    section_name: 'Mutations per Position - Sample Ratios'
    description: 'Line plot showing the ratio of mutations at initial vs final positions for each sample across different mutation types.'
    plot_type: 'linegraph'
    pconfig:
      id: 'mutsperpos_ratios_lineplot'
      title: 'Sample Mutation Ratios by Type'
      xlab: 'Mutation Type'
      ylab: 'Ratio (Initial / Final)'
      categories: true

    file_format: 'tsv'
    sp:
      fn: 'ratios_per_sample_mqc.tsv'


  mutsperpos_failing:
    id: 'mutsperpos_ratios_enriched_section'
    section_name: 'Mutations per Position - Samples failing'
    description: 'This table shows the samples for which the ratio of mutations at initial vs final positions is bigger than 2.'
    plot_type: 'table'
    pconfig:
      id: 'mutsperpos_ratios_enriched_table'
      title: 'Flagged Sample Mutation Ratios'
    file_format: 'tsv'
    sp:
      fn: 'samples_passing_ratio_threshold_mqc.tsv'
  
  mutsperpos_images:
    id: 'mutsperpos_images_section'
    section_name: 'Mutations per Position - Summary Plots'
    description: 'This section shows plots of mutations per position for all samples.'
    plot_type: 'images'
    pconfig:
      id: 'mutsperpos_images_plots'
      title: 'Mutations per position plots'
    file_format: 'png'
    sp:
      fn: '*BasePerPosWithoutNs_mqc.png'

custom_content:
  order:
    - mutsperpos_failing
    - mutsperpos_ratios    
    - mutsperpos_images

top_modules:
  - qualimap:
      name: "QualiMAP (raw)"
      info: "This section of the report shows QualiMAP results of the aligned raw reads."
      anchor: "qualimap_raw"
      path_filters:
        - "*.raw/**"
      path_filters_exclude:
        - "*.duplex/**"
        - "*.all_molecules/**"

  - qualimap:
      name: "QualiMAP (all molecules)"
      info: "This section of the report shows QualiMAP results of the aligned set of all unique molecules."
      anchor: "qualimap_all"
      path_filters:
        - "*.all_molecules/**"
      path_filters_exclude:
        - "*.raw/**"
        - "*.duplex/**"

  - qualimap:
      name: "QualiMAP (duplex)"
      info: "This section of the report shows QualiMAP results of the aligned set of duplex reads."
      anchor: "qualimap_duplex"
      path_filters:
        - "*.duplex/**"
      path_filters_exclude:
        - "*.raw/**"
        - "*.all_molecules/**"